<?php
if(isset($_GET['keyword'])){
  $HidoveInfo = [
    'keyword' => $_GET['keyword'],
  ];
}else{
  $HidoveInfo = [
      'keyword' => '我',
  ];
}
include "base.html";?>
<div class="container">
<div class="panel panel-success">
   <div class="panel-heading">
	<caption>最近更新</caption>
  </div>
  <div class="panel-body">
  
	 <table class="table">
      <thead>
        <tr>
          <th>#</th>
          <th>标题</th>
          <th>地址</th>
          <th>更新时间</th>
        </tr>
      </thead>
      <tbody id="index_list">
      </tbody>
</table>
<div id="loading" style="text-align: center;">
              正在加载中
        </div>
  </div>
</div>
</div>
<script type="text/javascript">
	$.ajax({
		type:'get',
		url:'api/search.php',
    data:{'keyword':'<?php echo $HidoveInfo['keyword']?>'},
    dataType:'json',
		success:function (data){
				var html = '';
				var list = eval(data);
				var list = list['data'];
			for(var index in list){
				html = html +`
			<tr>
          <th scope="row">`
          + index
          +`</th>
          <td>`
          + list[index]['title']
          +`</td>
          <td><a href="info.php?id=`
          + list[index]['url']
          +`" target="_blank">进去瞧一瞧`
          // + list[index]['url']
          +`</a></td>
          <td>`
          + list[index]['date']
          +`</td>
        </tr>`;
			}
			$('#index_list').html(html);
			$('#loading').remove();
		},
		error:function(){
	      html = `<div id="loading" style="text-align: center;">
	              加载失败
	        </div>`
	      $('#loading').html(html);
    	}
	});

</script>
<?php include "foot.html" ?>