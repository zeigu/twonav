<?php
$Hidove = [
	'title' => '正在加载中',

];
$HidoveInfo = [
  'id' => $_GET['id'],
];
 include "base.html";?>
<div class="container">
<div class="panel panel-success">
   <div class="panel-heading">
	<caption>详情</caption>
  </div>
  <div class="panel-body">
    <div id="loading" style="text-align: center;">
              正在加载中
        </div>
    <div id="Hidove_HidoveInfo">
      <div id="Hidove_HidoveInfo_images">
        
      </div>
      <div id="Hidove_HidoveInfo_text">
        
      </div>
      <div id="Hidove_HidoveInfo_down">
        
      </div>
    </div>

</div>
</div>
<script type="text/javascript">
	$.ajax({
		type:'get',
		url:'api/article.php',
    data:{'id':'<?php echo $HidoveInfo['id']?>'},
    dataType:'json',
		success:function (data){
				var html = '';
				var HidoveInfo = eval(data);
        $('title').text(HidoveInfo['data']['title']+" - <?php echo $Hidove['title'];?>");
        if (HidoveInfo['code']!=1) {
          alert(HidoveInfo['msg']);
          window.close();
        }
				var HidoveInfo = HidoveInfo['data'];
        for (var index in HidoveInfo['images']) {
          html = html +  `<img src="https://www.xd0.com`+HidoveInfo['images'][index]+`">`;
        }
        $('#Hidove_HidoveInfo_images').html(html);
        html =`<p>` + HidoveInfo['text'] + `</p>`;
        $('#Hidove_HidoveInfo_text').html(html);
        html = '';
        for (var index in HidoveInfo['down']) {
          html = html +  `<p>`+HidoveInfo['down'][index]['title'] + `</p><a href="` + HidoveInfo['down'][index]['url']
           + `" target="_blank">`
          +HidoveInfo['down'][index]['url']
          +`</a>`;
        }
      $('#loading').remove();
        $('#Hidove_HidoveInfo_down').html(html);
      },
   error:function (data){
      console.log(data);
      html = `<div id="loading" style="text-align: center;">
              加载失败
        </div>`
      $('#loading').html(html);

    }
	});
 
</script>
<?php include "foot.html" ?>